# ===========================================
# CXDB Docker Compose Configuration
# ===========================================
# Copy this file to .env and fill in your values

# -------------------------------------------
# Gateway Configuration (Required)
# -------------------------------------------

# Google OAuth credentials (get from https://console.cloud.google.com/apis/credentials)
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=GOCSPX-your-client-secret

# Allowed email domain (e.g., "example.com")
# Only users with emails from this domain can log in
# For development: use your personal email domain
# For production: use your organization's domain
GOOGLE_ALLOWED_DOMAIN=example.com

# Alternatively, use a comma-separated list of specific emails
# GOOGLE_ALLOWED_EMAILS=user1@example.com,user2@example.com

# Session secret for HMAC cookie signing (generate with: openssl rand -hex 32)
# MUST be exactly 64 hexadecimal characters
SESSION_SECRET=your-64-character-hex-secret-here

# Public URL where the gateway is accessible (used for OAuth redirect)
# For local development: http://localhost:8080
# For production: https://your-domain.com
PUBLIC_BASE_URL=http://localhost:8080

# -------------------------------------------
# Gateway Configuration (Optional)
# -------------------------------------------

# Gateway HTTP port (default: 8080)
# GATEWAY_PORT=8080

# Cookie domain for session cookies (leave empty for localhost)
# Example for production: .yourdomain.com
# SESSION_COOKIE_DOMAIN=

# Allowed origins for loading external renderer ESM modules (comma-separated)
# These origins are added to the Content-Security-Policy script-src directive
# ALLOWED_RENDERER_ORIGINS=https://esm.sh,https://cdn.jsdelivr.net,https://unpkg.com,https://your-cdn.com

# Dev mode - ONLY for local development (bypasses auth when PUBLIC_BASE_URL is localhost)
# DEV_MODE=true

# -------------------------------------------
# CXDB Server Configuration (Optional)
# -------------------------------------------

# Log level: debug, info, warn, error (default: info)
# CXDB_LOG_LEVEL=info

# Log format: json, text (default: json)
# CXDB_LOG_FORMAT=json

# Enable Prometheus metrics on port 9011 (default: false)
# CXDB_ENABLE_METRICS=true

# Maximum blob size in bytes (default: 10485760 = 10MB)
# CXDB_MAX_BLOB_SIZE=10485760

# Zstd compression level 1-22 (default: 3)
# Higher = better compression but slower
# CXDB_COMPRESSION_LEVEL=3

# Maximum concurrent binary protocol connections (default: 512, 0 = unlimited)
# CXDB_MAX_CONNECTIONS=512

# Read timeout for idle binary protocol connections in seconds (default: 300)
# Clients that send no data for this long are disconnected
# CXDB_CONNECTION_READ_TIMEOUT_SECS=300

# Write timeout for binary protocol connections in seconds (default: 30)
# CXDB_CONNECTION_WRITE_TIMEOUT_SECS=30
